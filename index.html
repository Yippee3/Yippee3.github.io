<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>刘某人de小破站</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="选择有时候比努力更重要">
<meta property="og:type" content="website">
<meta property="og:title" content="刘某人de小破站">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="刘某人de小破站">
<meta property="og:description" content="选择有时候比努力更重要">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="liuzq">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="刘某人de小破站" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">刘某人de小破站</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS 订阅"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜索"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-数据类型" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/09/20/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/" class="article-date">
  <time class="dt-published" datetime="2021-09-20T02:54:56.407Z" itemprop="datePublished">2021-09-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h1><h2 id="1-向量"><a href="#1-向量" class="headerlink" title="1.向量"></a>1.向量</h2><p>vector，类似与数学中集合的概念，由一个或多个元素构成。用于存储数值型，字符型或逻辑性数据的一维数组。用函数c来创建向量。</p>
<h3 id="1-基础向量"><a href="#1-基础向量" class="headerlink" title="1.基础向量"></a>1.基础向量</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">//举例</span><br><span class="line">&gt; x &lt;- <span class="built_in">c</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>)  *数值型</span><br><span class="line">&gt; y &lt;- <span class="built_in">c</span>(<span class="string">&quot;one&quot;</span>,<span class="string">&quot;two&quot;</span>,<span class="string">&quot;three&quot;</span>)  *字符串型必须加引号</span><br><span class="line">&gt; z &lt;- <span class="built_in">c</span>(<span class="built_in">T</span>,<span class="built_in">F</span>)  *逻辑型必须大写（<span class="literal">TRUE</span>,<span class="literal">FALSE</span>,<span class="built_in">T</span>,<span class="built_in">F</span>)</span><br><span class="line"></span><br><span class="line">//等差数列</span><br><span class="line">///默认用冒号</span><br><span class="line"><span class="built_in">c</span>(<span class="number">1</span>:<span class="number">100</span>)</span><br><span class="line">///自行设置</span><br><span class="line">////从<span class="number">1</span>到<span class="number">100</span>，等差值为<span class="number">2</span></span><br><span class="line">seq(from=<span class="number">1</span>,to=<span class="number">100</span>,by=<span class="number">2</span>)</span><br><span class="line">////从<span class="number">1</span>到<span class="number">100</span>，输出<span class="number">10</span>个</span><br><span class="line">seq(from=<span class="number">1</span>,to=<span class="number">100</span>,length.out=<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">//重复序列</span><br><span class="line">///重复内容，重复次数</span><br><span class="line"><span class="built_in">rep</span>(x,<span class="number">5</span>)</span><br><span class="line"><span class="built_in">rep</span>(x,each=<span class="number">2</span>,<span class="number">5</span>)  *把x中每个重复<span class="number">2</span>次，再把整体重复<span class="number">5</span>次</span><br><span class="line"><span class="built_in">rep</span>(x,<span class="built_in">c</span>(<span class="number">2</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">1</span>,<span class="number">3</span>))  *把x中的数值分别重复对应次数</span><br></pre></td></tr></table></figure>

<h3 id="2-索引向量-中括号"><a href="#2-索引向量-中括号" class="headerlink" title="2.索引向量  *中括号[]"></a>2.索引向量  *中括号[]</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">//正(负)整数索引</span><br><span class="line">x[<span class="built_in">c</span>(<span class="number">1</span>,<span class="number">4</span>)]  *显示向量x中第<span class="number">1</span>，<span class="number">4</span>个数</span><br><span class="line">x[<span class="built_in">c</span>(-<span class="number">3</span>)]  *隐藏向量x中第<span class="number">3</span>个数</span><br><span class="line"></span><br><span class="line">//逻辑向量索引,</span><br><span class="line">///数值向量  *x &lt;- <span class="built_in">c</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>)</span><br><span class="line">x[<span class="built_in">c</span>(<span class="built_in">T</span>,<span class="built_in">T</span>,<span class="built_in">F</span>,<span class="built_in">F</span>,<span class="built_in">T</span>)]  *则输出<span class="number">1</span>，<span class="number">2</span>，<span class="number">5</span></span><br><span class="line">x[<span class="built_in">c</span>(<span class="built_in">T</span>,<span class="built_in">F</span>)]  *则输出<span class="number">1</span>，<span class="number">3</span>，<span class="number">5</span></span><br><span class="line">x[<span class="built_in">c</span>(x&gt;<span class="number">2</span> &amp; x&lt;<span class="number">5</span>)]  *则输出<span class="number">3</span>，<span class="number">4</span></span><br><span class="line"></span><br><span class="line">///字符串向量  *y &lt;- <span class="built_in">c</span>(<span class="string">&quot;one&quot;</span>,<span class="string">&quot;two&quot;</span>,<span class="string">&quot;three&quot;</span>)</span><br><span class="line"><span class="string">&quot;one&quot;</span> %in% y  *输出<span class="literal">TRUE</span>，代表字符串one在向量y中</span><br><span class="line">y[<span class="string">&quot;one&quot;</span> %in% y]  *相当于y[<span class="built_in">c</span>(<span class="built_in">T</span>)],输出<span class="string">&quot;one&quot;</span> <span class="string">&quot;two&quot;</span> <span class="string">&quot;three&quot;</span></span><br><span class="line"></span><br><span class="line">y %in% <span class="built_in">c</span>(<span class="string">&quot;one&quot;</span>,<span class="string">&quot;two&quot;</span>)  *此时输出<span class="built_in">T</span> <span class="built_in">T</span> <span class="built_in">F</span></span><br><span class="line">y[y %in% <span class="built_in">c</span>(<span class="string">&quot;one&quot;</span>,<span class="string">&quot;two&quot;</span>)]  *相当于y[<span class="built_in">c</span>(<span class="built_in">T</span>,<span class="built_in">T</span>,<span class="built_in">F</span>)],输出<span class="string">&quot;one&quot;</span> <span class="string">&quot;two&quot;</span></span><br><span class="line"></span><br><span class="line">//名称索引  </span><br><span class="line">z &lt;- <span class="built_in">c</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line"><span class="built_in">names</span>(z) &lt;- <span class="built_in">c</span>(<span class="string">&quot;one&quot;</span>,<span class="string">&quot;two&quot;</span>,<span class="string">&quot;three&quot;</span>)</span><br><span class="line">z  *one   two three </span><br><span class="line">      <span class="number">1</span>     <span class="number">2</span>     <span class="number">3</span></span><br><span class="line"><span class="built_in">names</span>(z)  *[<span class="number">1</span>] <span class="string">&quot;one&quot;</span>   <span class="string">&quot;two&quot;</span>   <span class="string">&quot;three&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-修改向量"><a href="#3-修改向量" class="headerlink" title="3.修改向量"></a>3.修改向量</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">x &lt;- <span class="built_in">c</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">//添加数值</span><br><span class="line">x[<span class="built_in">c</span>(<span class="number">6</span>)] &lt;- <span class="number">6</span>  *添加向量x第六位为<span class="number">6</span></span><br><span class="line">x[<span class="built_in">c</span>(<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>)] &lt;- <span class="built_in">c</span>(<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>)  *批量添加向量x第六七八位为<span class="number">6</span>，<span class="number">7</span>，<span class="number">8</span></span><br><span class="line">append(x=x,<span class="number">7</span>,after = <span class="number">2</span>)  *在向量x的第二位后面添加数值<span class="number">7</span></span><br><span class="line"></span><br><span class="line">//修改数值  *利用索引找到这个值后重新赋值</span><br><span class="line">x[<span class="number">3</span>] &lt;- <span class="number">7</span>  *输出<span class="number">1</span>，<span class="number">2</span>，<span class="number">7</span>，<span class="number">4</span>，<span class="number">5</span></span><br><span class="line"></span><br><span class="line">//删除数值  *利用负整数索引，然后重新定义向量</span><br><span class="line">x[<span class="built_in">c</span>(-<span class="number">2</span>)]  *输出<span class="number">1</span>，<span class="number">3</span>，<span class="number">4</span>，<span class="number">5</span></span><br><span class="line">x &lt;- x[<span class="built_in">c</span>(-<span class="number">2</span>)]  *此时便删除了向量x中第二位数</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="4-向量运算"><a href="#4-向量运算" class="headerlink" title="4.向量运算"></a>4.向量运算</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">//单个向量  *x &lt;- <span class="built_in">c</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line">x+<span class="number">1</span>  *[<span class="number">1</span>] <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span>  *向量x中每个元素都加一，其他数学运算同理</span><br><span class="line"></span><br><span class="line">//多个向量  *y &lt;- <span class="built_in">c</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line">///元素数目相同</span><br><span class="line">x+y  *[<span class="number">1</span>] <span class="number">2</span> <span class="number">4</span> <span class="number">6</span> <span class="number">8</span>  *向量x和向量y中的每个元素对应相加，其他数学运算同理</span><br><span class="line">///元素数目为倍数关系  *y &lt;- <span class="built_in">c</span>(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line">x+y  *[<span class="number">1</span>] <span class="number">2</span> <span class="number">4</span> <span class="number">4</span> <span class="number">6</span>  *以较少的那个向量与多的向量循环相加，其他数学运算同理</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//逻辑运算  *x &lt;- <span class="built_in">c</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)  y &lt;- <span class="built_in">c</span>(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line">x&gt;<span class="number">2</span>  *[<span class="number">1</span>] <span class="built_in">F</span>  <span class="built_in">F</span>  <span class="built_in">T</span>  <span class="built_in">T</span></span><br><span class="line">x&gt;y  *[<span class="number">1</span>] <span class="built_in">F</span>  <span class="built_in">F</span>  <span class="built_in">T</span>  <span class="built_in">T</span>  *整倍数且元素数目不同时，循环比对输出</span><br><span class="line">x==y  *[<span class="number">1</span>] <span class="built_in">T</span>  <span class="built_in">T</span>  <span class="built_in">F</span>  <span class="built_in">F</span>  *比较运算符是两个等号（==）！一个是赋值操作！</span><br><span class="line"></span><br><span class="line">//运算符号</span><br><span class="line">+  *加法</span><br><span class="line">-  *减法</span><br><span class="line">*  *乘法</span><br><span class="line">/  *除法</span><br><span class="line">^  *乘幂</span><br><span class="line">%%  *求余</span><br><span class="line">%/%  *整除</span><br><span class="line"><span class="built_in">abs</span>(x)  *返回向量的绝对值</span><br><span class="line"><span class="built_in">sqrt</span>(x)  *返回向量的平方根</span><br><span class="line"><span class="built_in">log</span>(x,base=底数)  *不加底数默认为自然对数，底数为<span class="number">10</span>时直接log10(x)</span><br><span class="line"><span class="built_in">exp</span>(x)  *以自然数e为底的指数x</span><br><span class="line"><span class="built_in">ceiling</span>(x)  *向上取整</span><br><span class="line"><span class="built_in">floor</span>(x)  *向下取整</span><br><span class="line"><span class="built_in">trunc</span>(x)  *返回整数部分</span><br><span class="line"><span class="built_in">round</span>(x,digits=num)  *四舍五入，digits保留小数位数</span><br><span class="line"><span class="built_in">signif</span>(x,digits=num)  *digits保留有效数字位数</span><br><span class="line"><span class="built_in">sum</span>(x)  *求和</span><br><span class="line"><span class="built_in">max</span>(x)  *最大值</span><br><span class="line"><span class="built_in">min</span>(x)  *最小值</span><br><span class="line"><span class="built_in">range</span>(x)  *同时返回最大最小值</span><br><span class="line">median(x)  *中位数</span><br><span class="line">mean(x)  *均值</span><br><span class="line">var(x)  *方差，<span class="built_in">round</span>(var(x)，digits=<span class="number">2</span>)，返回方差保留两位小数</span><br><span class="line">sd(x)  *标准差</span><br><span class="line">quantile(x)  *分位数</span><br><span class="line"><span class="built_in">prod</span>(x)  *连乘的积</span><br><span class="line"></span><br><span class="line">//搜索数值的位置，即索引值</span><br><span class="line">x</span><br><span class="line">[<span class="number">1</span>] -<span class="number">2.1</span>  <span class="number">3.0</span>  <span class="number">3.1</span></span><br><span class="line">which.max(x)</span><br><span class="line">[<span class="number">1</span>] <span class="number">3</span>       *即为索引值，在向量x中第三位</span><br><span class="line">x[which.max(x)]</span><br><span class="line">[<span class="number">1</span>] <span class="number">3.1</span>     *即可以找出向量中的最大值</span><br></pre></td></tr></table></figure>

<h2 id="2-矩阵和数组"><a href="#2-矩阵和数组" class="headerlink" title="2.矩阵和数组"></a>2.矩阵和数组</h2><h3 id="1-矩阵"><a href="#1-矩阵" class="headerlink" title="1.矩阵"></a>1.矩阵</h3><p>matrix，是一个按照长方阵列排列的复数或实数的集合，是二维的，需要有行和列。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">//创建矩阵</span><br><span class="line">m &lt;- matrix(<span class="built_in">c</span>(<span class="number">1</span>:<span class="number">20</span>),nrow=<span class="number">4</span>,ncol=<span class="number">5</span>)  *nrow-行数，ncol-列数</span><br><span class="line">*输出结果</span><br><span class="line">     [,<span class="number">1</span>] [,<span class="number">2</span>] [,<span class="number">3</span>] [,<span class="number">4</span>] [,<span class="number">5</span>]</span><br><span class="line">[<span class="number">1</span>,]    <span class="number">1</span>    <span class="number">5</span>    <span class="number">9</span>   <span class="number">13</span>   <span class="number">17</span></span><br><span class="line">[<span class="number">2</span>,]    <span class="number">2</span>    <span class="number">6</span>   <span class="number">10</span>   <span class="number">14</span>   <span class="number">18</span></span><br><span class="line">[<span class="number">3</span>,]    <span class="number">3</span>    <span class="number">7</span>   <span class="number">11</span>   <span class="number">15</span>   <span class="number">19</span></span><br><span class="line">[<span class="number">4</span>,]    <span class="number">4</span>    <span class="number">8</span>   <span class="number">12</span>   <span class="number">16</span>   <span class="number">20</span></span><br><span class="line"></span><br><span class="line">m &lt;- matrix(<span class="built_in">c</span>(<span class="number">1</span>:<span class="number">20</span>),nrow=<span class="number">4</span>,byrow=<span class="built_in">T</span>)  *byrow=<span class="built_in">T</span>代表按行排列，=<span class="built_in">F</span>代表按列排列</span><br><span class="line">*输出结果</span><br><span class="line">     [,<span class="number">1</span>] [,<span class="number">2</span>] [,<span class="number">3</span>] [,<span class="number">4</span>] [,<span class="number">5</span>]</span><br><span class="line">[<span class="number">1</span>,]    <span class="number">1</span>    <span class="number">2</span>    <span class="number">3</span>    <span class="number">4</span>    <span class="number">5</span></span><br><span class="line">[<span class="number">2</span>,]    <span class="number">6</span>    <span class="number">7</span>    <span class="number">8</span>    <span class="number">9</span>   <span class="number">10</span></span><br><span class="line">[<span class="number">3</span>,]   <span class="number">11</span>   <span class="number">12</span>   <span class="number">13</span>   <span class="number">14</span>   <span class="number">15</span></span><br><span class="line">[<span class="number">4</span>,]   <span class="number">16</span>   <span class="number">17</span>   <span class="number">18</span>   <span class="number">19</span>   <span class="number">20</span></span><br><span class="line"></span><br><span class="line">//矩阵行列命名</span><br><span class="line">rnames &lt;- <span class="built_in">c</span>(<span class="string">&quot;R1&quot;</span>,<span class="string">&quot;R2&quot;</span>,<span class="string">&quot;R3&quot;</span>,<span class="string">&quot;R4&quot;</span>)  *定义每行的名字</span><br><span class="line">cnames &lt;- <span class="built_in">c</span>(<span class="string">&quot;C1&quot;</span>,<span class="string">&quot;C2&quot;</span>,<span class="string">&quot;C3&quot;</span>,<span class="string">&quot;C4&quot;</span>,<span class="string">&quot;C5&quot;</span>)  *定义每列的名字</span><br><span class="line"><span class="built_in">dimnames</span>(m) &lt;- <span class="built_in">list</span>(rnames,cnames)  *将名字赋给矩阵m</span><br><span class="line">*输出结果</span><br><span class="line">   C1 C2 C3 C4 C5</span><br><span class="line">R1  <span class="number">1</span>  <span class="number">5</span>  <span class="number">9</span> <span class="number">13</span> <span class="number">17</span></span><br><span class="line">R2  <span class="number">2</span>  <span class="number">6</span> <span class="number">10</span> <span class="number">14</span> <span class="number">18</span></span><br><span class="line">R3  <span class="number">3</span>  <span class="number">7</span> <span class="number">11</span> <span class="number">15</span> <span class="number">19</span></span><br><span class="line">R4  <span class="number">4</span>  <span class="number">8</span> <span class="number">12</span> <span class="number">16</span> <span class="number">20</span></span><br></pre></td></tr></table></figure>

<h3 id="3-数组"><a href="#3-数组" class="headerlink" title="3.数组"></a>3.数组</h3><p>三维及三维以上数据构成的一组数的集合</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">//创建及添加标签</span><br><span class="line">dim1 &lt;- <span class="built_in">c</span>(<span class="string">&quot;A1&quot;</span>,<span class="string">&quot;A2&quot;</span>)</span><br><span class="line">dim2 &lt;- <span class="built_in">c</span>(<span class="string">&quot;B1&quot;</span>,<span class="string">&quot;B2&quot;</span>,<span class="string">&quot;B3&quot;</span>)</span><br><span class="line">dim3 &lt;- <span class="built_in">c</span>(<span class="string">&quot;C1&quot;</span>,<span class="string">&quot;C2&quot;</span>,<span class="string">&quot;C3&quot;</span>,<span class="string">&quot;C4&quot;</span>)  *三维数据的标签</span><br><span class="line">z &lt;- array(<span class="built_in">c</span>(<span class="number">1</span>:<span class="number">24</span>),<span class="built_in">c</span>(<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>))   *三维数组的赋值</span><br><span class="line">provideDimnames(z,base = <span class="built_in">list</span>(dim1,dim2,dim3))  *将标签对应给数组</span><br><span class="line">*输出结果</span><br><span class="line">, , C1</span><br><span class="line"></span><br><span class="line">   B1 B2 B3</span><br><span class="line">A1  <span class="number">1</span>  <span class="number">3</span>  <span class="number">5</span></span><br><span class="line">A2  <span class="number">2</span>  <span class="number">4</span>  <span class="number">6</span></span><br><span class="line"></span><br><span class="line">, , C2</span><br><span class="line"></span><br><span class="line">   B1 B2 B3</span><br><span class="line">A1  <span class="number">7</span>  <span class="number">9</span> <span class="number">11</span></span><br><span class="line">A2  <span class="number">8</span> <span class="number">10</span> <span class="number">12</span></span><br><span class="line"></span><br><span class="line">, , C3</span><br><span class="line"></span><br><span class="line">   B1 B2 B3</span><br><span class="line">A1 <span class="number">13</span> <span class="number">15</span> <span class="number">17</span></span><br><span class="line">A2 <span class="number">14</span> <span class="number">16</span> <span class="number">18</span></span><br><span class="line"></span><br><span class="line">, , C4</span><br><span class="line"></span><br><span class="line">   B1 B2 B3</span><br><span class="line">A1 <span class="number">19</span> <span class="number">21</span> <span class="number">23</span></span><br><span class="line">A2 <span class="number">20</span> <span class="number">22</span> <span class="number">24</span></span><br><span class="line"></span><br><span class="line">//简化步骤</span><br><span class="line">dim1 &lt;- <span class="built_in">c</span>(<span class="string">&quot;A1&quot;</span>,<span class="string">&quot;A2&quot;</span>)</span><br><span class="line">dim2 &lt;- <span class="built_in">c</span>(<span class="string">&quot;B1&quot;</span>,<span class="string">&quot;B2&quot;</span>,<span class="string">&quot;B3&quot;</span>)</span><br><span class="line">dim3 &lt;- <span class="built_in">c</span>(<span class="string">&quot;C1&quot;</span>,<span class="string">&quot;C2&quot;</span>,<span class="string">&quot;C3&quot;</span>,<span class="string">&quot;C4&quot;</span>)</span><br><span class="line">z &lt;- array(<span class="built_in">c</span>(<span class="number">1</span>:<span class="number">24</span>),<span class="built_in">c</span>(<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>),<span class="built_in">dimnames</span> = <span class="built_in">list</span>(dim1,dim2,dim3))</span><br></pre></td></tr></table></figure>

<h3 id="3-索引方法"><a href="#3-索引方法" class="headerlink" title="3.索引方法"></a>3.索引方法</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">//矩阵m</span><br><span class="line">m &lt;- matrix(<span class="built_in">c</span>(<span class="number">1</span>:<span class="number">20</span>),nrow=<span class="number">4</span>,ncol=<span class="number">5</span>)  </span><br><span class="line">*输出结果</span><br><span class="line">     [,<span class="number">1</span>] [,<span class="number">2</span>] [,<span class="number">3</span>] [,<span class="number">4</span>] [,<span class="number">5</span>]</span><br><span class="line">[<span class="number">1</span>,]    <span class="number">1</span>    <span class="number">5</span>    <span class="number">9</span>   <span class="number">13</span>   <span class="number">17</span></span><br><span class="line">[<span class="number">2</span>,]    <span class="number">2</span>    <span class="number">6</span>   <span class="number">10</span>   <span class="number">14</span>   <span class="number">18</span></span><br><span class="line">[<span class="number">3</span>,]    <span class="number">3</span>    <span class="number">7</span>   <span class="number">11</span>   <span class="number">15</span>   <span class="number">19</span></span><br><span class="line">[<span class="number">4</span>,]    <span class="number">4</span>    <span class="number">8</span>   <span class="number">12</span>   <span class="number">16</span>   <span class="number">20</span></span><br><span class="line"></span><br><span class="line">//索引方法</span><br><span class="line">m[<span class="number">1</span>,<span class="number">2</span>]  *矩阵m的第一行第二列的数值，用名称或者标签访问同理，如m[<span class="string">&quot;R1&quot;</span>,<span class="string">&quot;C1&quot;</span>]</span><br><span class="line">*输出结果</span><br><span class="line">[<span class="number">1</span>] <span class="number">5</span></span><br><span class="line"></span><br><span class="line">m[<span class="number">1</span>,<span class="built_in">c</span>(<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)]  *矩阵m的第一行的第二，三，四列的数值</span><br><span class="line">*输出结果</span><br><span class="line">[<span class="number">1</span>]  <span class="number">5</span>  <span class="number">9</span> <span class="number">13</span></span><br><span class="line"></span><br><span class="line">m[<span class="built_in">c</span>(<span class="number">2</span>,<span class="number">3</span>),<span class="built_in">c</span>(<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)]  *输出矩阵m的一个子集，第二三行和第二三四列</span><br><span class="line">*输出结果</span><br><span class="line">[,<span class="number">1</span>] [,<span class="number">2</span>] [,<span class="number">3</span>]</span><br><span class="line">[<span class="number">1</span>,]    <span class="number">6</span>   <span class="number">10</span>   <span class="number">14</span></span><br><span class="line">[<span class="number">2</span>,]    <span class="number">7</span>   <span class="number">11</span>   <span class="number">15</span></span><br><span class="line"></span><br><span class="line">m[<span class="number">2</span>,]/m[,<span class="number">3</span>]  *访问第二行或者第三列的所有数据</span><br><span class="line">m[<span class="number">2</span>,]  *[<span class="number">1</span>]  <span class="number">2</span>  <span class="number">6</span> <span class="number">10</span> <span class="number">14</span> <span class="number">18</span></span><br><span class="line">m[,<span class="number">3</span>]  *[<span class="number">1</span>]  <span class="number">9</span> <span class="number">10</span> <span class="number">11</span> <span class="number">12</span></span><br><span class="line"></span><br><span class="line">m[<span class="built_in">c</span>(-<span class="number">1</span>,-<span class="number">2</span>),<span class="number">2</span>]  *负数代表去除第一，二行数值后的第二列</span><br><span class="line">*输出结果</span><br><span class="line">[<span class="number">1</span>] <span class="number">7</span> <span class="number">8</span></span><br></pre></td></tr></table></figure>

<h3 id="4-运算方法"><a href="#4-运算方法" class="headerlink" title="4.运算方法"></a>4.运算方法</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">rowSums(m)  *每一行的和</span><br><span class="line">colSums(m)  *每一列的和</span><br><span class="line"></span><br><span class="line">rowMeans(m)  *每一行的平均数</span><br><span class="line">colMeans(m)  *每一列的平均数</span><br><span class="line"></span><br><span class="line">同型矩阵加法减法，对应数值直接运算</span><br><span class="line">乘法除法（内积，外积，求逆）暂缺。。。线代无法理解目前</span><br><span class="line"></span><br><span class="line">diag(m)  *对角矩阵返回对角线的值</span><br><span class="line">t(m)  *矩阵转置，对行和列进行互换</span><br></pre></td></tr></table></figure>

<h2 id="3-数据框"><a href="#3-数据框" class="headerlink" title="3.数据框"></a>3.数据框</h2><p>一种表格式的数据结构。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">//数据存到R中进行分析，将内容存储到统一的数据类型，利用数据框函数合并即可</span><br><span class="line">state &lt;- data.frame(state.abb,state.name)</span><br><span class="line"></span><br><span class="line">//数据框的索引方式和前述索引相同以及一下方式</span><br><span class="line">attach(mtcars)  *attach命令载入数据框后，可以直接访问数据的列名</span><br><span class="line">with(mtcars,(hp))  *省了载入步骤，直接敲出来</span><br><span class="line"></span><br><span class="line">//以及$符，快速取出数据框或者列表内某一列的内容</span><br><span class="line">women</span><br><span class="line">   height weight</span><br><span class="line"><span class="number">1</span>      <span class="number">58</span>    <span class="number">115</span></span><br><span class="line"><span class="number">2</span>      <span class="number">59</span>    <span class="number">117</span></span><br><span class="line"><span class="number">3</span>      <span class="number">60</span>    <span class="number">120</span></span><br><span class="line"><span class="number">4</span>      <span class="number">61</span>    <span class="number">123</span></span><br><span class="line"><span class="number">5</span>      <span class="number">62</span>    <span class="number">126</span></span><br><span class="line"><span class="number">6</span>      <span class="number">63</span>    <span class="number">129</span></span><br><span class="line"><span class="number">7</span>      <span class="number">64</span>    <span class="number">132</span></span><br><span class="line"><span class="number">8</span>      <span class="number">65</span>    <span class="number">135</span></span><br><span class="line"><span class="number">9</span>      <span class="number">66</span>    <span class="number">139</span></span><br><span class="line"><span class="number">10</span>     <span class="number">67</span>    <span class="number">142</span></span><br><span class="line"><span class="number">11</span>     <span class="number">68</span>    <span class="number">146</span></span><br><span class="line"><span class="number">12</span>     <span class="number">69</span>    <span class="number">150</span></span><br><span class="line"><span class="number">13</span>     <span class="number">70</span>    <span class="number">154</span></span><br><span class="line"><span class="number">14</span>     <span class="number">71</span>    <span class="number">159</span></span><br><span class="line"><span class="number">15</span>     <span class="number">72</span>    <span class="number">164</span></span><br><span class="line">women$height</span><br><span class="line"> [<span class="number">1</span>] <span class="number">58</span> <span class="number">59</span> <span class="number">60</span> <span class="number">61</span> <span class="number">62</span> <span class="number">63</span> <span class="number">64</span> <span class="number">65</span> <span class="number">66</span> <span class="number">67</span> <span class="number">68</span> <span class="number">69</span> <span class="number">70</span> <span class="number">71</span> <span class="number">72</span></span><br><span class="line">women$weight</span><br><span class="line"> [<span class="number">1</span>] <span class="number">115</span> <span class="number">117</span> <span class="number">120</span> <span class="number">123</span> <span class="number">126</span> <span class="number">129</span> <span class="number">132</span> <span class="number">135</span> <span class="number">139</span> <span class="number">142</span> <span class="number">146</span></span><br><span class="line">[<span class="number">12</span>] <span class="number">150</span> <span class="number">154</span> <span class="number">159</span> <span class="number">164</span></span><br><span class="line">plot(women$height,women$weight)  *$符取值直接画散点图</span><br></pre></td></tr></table></figure>

<h2 id="4-列表"><a href="#4-列表" class="headerlink" title="4.列表"></a>4.列表</h2><p>用来存储很多内容的一个集合，包括向量，矩阵，数据框，甚至其他列表。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">//创建列表</span><br><span class="line">a &lt;- 1:<span class="number">20</span></span><br><span class="line">b &lt;- matrix(<span class="number">1</span>:<span class="number">20</span>,<span class="number">4</span>)</span><br><span class="line">c &lt;- mtcars</span><br><span class="line">d &lt;- <span class="string">&quot;this is a test list&quot;</span></span><br><span class="line">mlist &lt;- <span class="built_in">list</span>(a,b,<span class="built_in">c</span>,d)</span><br><span class="line">或</span><br><span class="line">mlist &lt;- <span class="built_in">list</span>(frist=a,second=b,third=<span class="built_in">c</span>,forth=d)</span><br><span class="line"></span><br><span class="line">//添加或删除元素</span><br><span class="line">mlist[<span class="number">5</span>] &lt;- iris</span><br><span class="line">mlist[<span class="number">5</span>] &lt;- <span class="literal">NULL</span> 或 mlist &lt;- mlist[-<span class="built_in">c</span>(<span class="number">5</span>)]</span><br><span class="line"></span><br><span class="line">//列表中中括号[]的含义</span><br><span class="line">mlist[<span class="number">1</span>]  *此时查询<span class="built_in">class</span>,输出的是<span class="built_in">list</span>代表访问的是第一个数据集</span><br><span class="line">mlist[[<span class="number">1</span>]]  *查询<span class="built_in">class</span>,输出的是数据集内部的元素属性</span><br></pre></td></tr></table></figure>

<h2 id="5-因子"><a href="#5-因子" class="headerlink" title="5.因子"></a>5.因子</h2><p>在R中，名义型变量和有序性变量称为因子，factor。这些分类变量的可能值称为一个水平，level。这些水平值构成的向量就称为因子。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//举例，mtcars</span><br><span class="line">mtcars$cyl  *mtcars数据集中发动机缸数统计</span><br><span class="line"> [<span class="number">1</span>] <span class="number">6</span> <span class="number">6</span> <span class="number">4</span> <span class="number">6</span> <span class="number">8</span> <span class="number">6</span> <span class="number">8</span> <span class="number">4</span> <span class="number">4</span> <span class="number">6</span> <span class="number">6</span> <span class="number">8</span> <span class="number">8</span> <span class="number">8</span> <span class="number">8</span> <span class="number">8</span> <span class="number">8</span> <span class="number">4</span> <span class="number">4</span> <span class="number">4</span> <span class="number">4</span> <span class="number">8</span></span><br><span class="line">[<span class="number">23</span>] <span class="number">8</span> <span class="number">8</span> <span class="number">8</span> <span class="number">4</span> <span class="number">4</span> <span class="number">4</span> <span class="number">8</span> <span class="number">6</span> <span class="number">8</span> <span class="number">4</span></span><br><span class="line">table(mtcars$cyl)</span><br><span class="line"> <span class="number">4</span>  <span class="number">6</span>  <span class="number">8</span> </span><br><span class="line"><span class="number">11</span>  <span class="number">7</span> <span class="number">14</span> </span><br><span class="line">*其中，cyl是因子，<span class="number">4</span>，<span class="number">6</span>，<span class="number">8</span>是因子中不同的level。</span><br></pre></td></tr></table></figure>

<h2 id="6-数值缺失"><a href="#6-数值缺失" class="headerlink" title="6.数值缺失"></a>6.数值缺失</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//使用VIM包，内置数据集sleep</span><br><span class="line"><span class="built_in">is.na</span>(sleep)  *查询数据集中是否存在<span class="literal">NA</span>值，是返回<span class="built_in">T</span>，否返回<span class="built_in">F</span></span><br><span class="line">na.omit(sleep)  *去除数据集中的<span class="literal">NA</span>值或含有<span class="literal">NA</span>值的每一行</span><br><span class="line"></span><br><span class="line">//<span class="literal">NA</span>是存在的值，不知道是多少；<span class="literal">NaN</span>表示不存在；<span class="literal">Inf</span>表示无穷</span><br></pre></td></tr></table></figure>

<h2 id="7-字符串"><a href="#7-字符串" class="headerlink" title="7.字符串"></a>7.字符串</h2><p>学完正则再补。</p>
<h2 id="8-时间日期"><a href="#8-时间日期" class="headerlink" title="8.时间日期"></a>8.时间日期</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//举例</span><br><span class="line">a &lt;- <span class="string">&quot;2021-05-02&quot;</span>  *此时a是字符串类型，非date</span><br><span class="line">as.Date(a,format = <span class="string">&quot;%Y-%m-%d&quot;</span>)  *转换即可</span><br><span class="line"></span><br><span class="line">//更多可以参考 ?strftime</span><br><span class="line"></span><br><span class="line">//创建连续时间</span><br><span class="line">seq(as.Date(<span class="string">&quot;2021-01-01&quot;</span>),as.Date(<span class="string">&quot;2021-05-02&quot;</span>),by=<span class="number">5</span>)</span><br><span class="line">*使用help命令查看详细参数含义（<span class="string">&#x27;to&#x27;</span>，<span class="string">&#x27;by&#x27;</span>，<span class="string">&#x27;length.out&#x27;</span>/<span class="string">&#x27;along.with&#x27;</span>）</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/09/20/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/" data-id="ckts23ax60007fwvlbh8v045s" data-title="" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-U盘数据恢复" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/09/20/U%E7%9B%98%E6%95%B0%E6%8D%AE%E6%81%A2%E5%A4%8D/" class="article-date">
  <time class="dt-published" datetime="2021-09-20T02:54:40.601Z" itemprop="datePublished">2021-09-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="U盘数据恢复"><a href="#U盘数据恢复" class="headerlink" title="U盘数据恢复"></a>U盘数据恢复</h1><p>打开cmd(命令提示符)</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">H:</span><br><span class="line">attrib -s -h -r /s /d</span><br><span class="line"></span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/09/20/U%E7%9B%98%E6%95%B0%E6%8D%AE%E6%81%A2%E5%A4%8D/" data-id="ckts23ax30003fwvl8sb1dmzu" data-title="" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-sartoolkit安装与使用" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/09/20/sartoolkit%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/" class="article-date">
  <time class="dt-published" datetime="2021-09-20T02:54:36.653Z" itemprop="datePublished">2021-09-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="sartoolkit安装与使用"><a href="#sartoolkit安装与使用" class="headerlink" title="sartoolkit安装与使用"></a>sartoolkit安装与使用</h1><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>从<a target="_blank" rel="noopener" href="https://www.ncbi.nlm.nih.gov/sra/docs/toolkitsoft/%E4%B8%AD%E7%9A%84NCBI">https://www.ncbi.nlm.nih.gov/sra/docs/toolkitsoft/中的NCBI</a> SRA Toolkit latest release compiled binaries and md5 checksums下载安装包。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> </span><br><span class="line">tar zxvf sratoolkit.current-ubuntu64.tar.gz</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;export PATH=/opt/sratoolkit.2.9.2-ubuntu64/bin/:<span class="variable">$PATH</span>&quot;</span> &gt;&gt; ~/.profile</span><br><span class="line"><span class="built_in">source</span> ~/.profile</span><br><span class="line">fastq-dump -h</span><br><span class="line"><span class="comment">#最新版本大半命令不能使用，全部使用-orig命令</span></span><br><span class="line">fastq-dump-orig.2.11.0 -h</span><br><span class="line"><span class="comment">#解决方案：将orig命令下内容复制入fastq-dump文件内</span></span><br><span class="line"><span class="comment">#删除fastq-dump-----复制fastq-dump-orig.2.11.0-----粘贴------重命名为fastq-dump</span></span><br><span class="line">fatsq-dump -h</span><br></pre></td></tr></table></figure>

<h2 id="fastq-dump使用"><a href="#fastq-dump使用" class="headerlink" title="fastq-dump使用"></a>fastq-dump使用</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">将sra转换成fastq</span></span><br><span class="line">fastq-dump SRR1553610</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">无脑用</span></span><br><span class="line">fastq-dump --gzip --split-3 --defline-qual &#x27;+&#x27; --defline-seq &#x27;@\$ac-\$si/\$ri&#x27;   SRR_ID</span><br><span class="line"><span class="meta">#</span><span class="bash"> 建议加别名</span></span><br><span class="line">alias fd=&#x27;fastq-dump --split-3 --defline-qual &#x27;+&#x27; --defline-seq &#x27;@\\\$ac-\\\$si/\\\$ri&#x27; &#x27;</span><br><span class="line">fd SRR_ID</span><br></pre></td></tr></table></figure>

<h3 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h3><h4 id="不懂也加-reads拆分"><a href="#不懂也加-reads拆分" class="headerlink" title="不懂也加: reads拆分"></a>不懂也加: reads拆分</h4><p>默认情况下<code>fastq-dump</code>不对reads进行拆分, 对于很早之前的单端测序没有出现问题.但是对于双端测序而言,就会把原本的两条reads合并成一个,后续分析必然会出错.</p>
<p>常见的参数有三类:</p>
<ul>
<li><code>--split-spot</code>: 将双端测序分为两份,但是都放在同一个文件中</li>
<li><code>--split-files</code>: 将双端测序分为两份,放在不同的文件,但是对于一方有而一方没有的reads直接丢弃</li>
<li><code>--split-3</code>    : 将双端测序分为两份,放在不同的文件,但是对于一方有而一方没有的reads会单独放在一个文件夹里</li>
</ul>
<p>对于一个你不知道到底是单端还是双端的SRA文件,一律用<code>--split-3</code>.</p>
<h4 id="没事别加-read-ID"><a href="#没事别加-read-ID" class="headerlink" title="没事别加: read ID"></a>没事别加: read ID</h4><p>默认双端测序数据拆分后得到两个文件中同一个reads的名字是一样的,但是加上<code>-I | --readids</code>之后同一个reads的ID就会加上.1和.2进行区分.</p>
<h4 id="有点意义-原始格式"><a href="#有点意义-原始格式" class="headerlink" title="有点意义: 原始格式"></a>有点意义: 原始格式</h4><p>默认情况下输出的文件的ID都是SRR开头,但其实原始数据名字不是这样子,比如说<code>@ST-E00600:143:H3LJWALXX:1:1101:5746:1016 2:N:0:CCTCCTGA</code>,<code>@HWI-ST620:248:HB11HADXX:2:1101:1241:2082#0/1</code>这种. 如果你想看到那种格式,而不是SRR, 可以通过如下三个选项进行修改</p>
<ul>
<li><code>F|--origfmt</code>: 仅保留数据名字</li>
<li><code>--defline-seq &lt;fmt&gt;</code>: 定义readsID的显示方式</li>
<li><code>--defline-qual &lt;fmt&gt;</code>: 定义质量的显示方式</li>
</ul>
<h4 id="有点意思-输出方式"><a href="#有点意思-输出方式" class="headerlink" title="有点意思: 输出方式"></a>有点意思: 输出方式</h4><p>这部分参数也很重要,  选择是否压缩,还是直接输出到标准输出</p>
<ul>
<li><code>--gzip</code>, <code>--bzip2</code>: 压缩方式</li>
<li><code>-Z | --stdout</code> : 输出到标准输出</li>
<li><code>-O|--outdir</code> : 输出到指定文件夹</li>
</ul>
<h2 id="fasterq-dump使用"><a href="#fasterq-dump使用" class="headerlink" title="fasterq-dump使用"></a>fasterq-dump使用</h2><p>安装同样删除原文件fasterq-dump，复制fasterq-dump-ori.2.11.0后重命名为fasterq-dump</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#基本用法</span></span><br><span class="line">fasterq-dump --split-3 -p SRR5318040.sra </span><br><span class="line"><span class="comment">#可使用-e参数选择线程数</span></span><br><span class="line"><span class="comment">#缺点：没有压缩选项，不能修改名字</span></span><br></pre></td></tr></table></figure>





<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/8322e00a9f8a">SRA批量下载及转为Fastq格式 - 简书 (jianshu.com)</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/u012110870/article/details/82500650">如何使用fastq-dump转换SRA格式_xuzhougeng blog-CSDN博客</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/09/20/sartoolkit%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/" data-id="ckts23ax50006fwvlcgxi9zge" data-title="" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-R语言解压与压缩" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/09/20/R%E8%AF%AD%E8%A8%80%E8%A7%A3%E5%8E%8B%E4%B8%8E%E5%8E%8B%E7%BC%A9/" class="article-date">
  <time class="dt-published" datetime="2021-09-20T02:54:28.037Z" itemprop="datePublished">2021-09-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="R语言解压与压缩"><a href="#R语言解压与压缩" class="headerlink" title="R语言解压与压缩"></a>R语言解压与压缩</h1><h2 id="zip"><a href="#zip" class="headerlink" title=".zip"></a>.zip</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">zip()#压缩</span><br><span class="line">unzip()#解压缩</span><br></pre></td></tr></table></figure>

<h2 id="tar"><a href="#tar" class="headerlink" title=".tar"></a>.tar</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tar()</span><br><span class="line">untar()</span><br></pre></td></tr></table></figure>

<h2 id="gz-bz2"><a href="#gz-bz2" class="headerlink" title=".gz.bz2"></a>.gz.bz2</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#直接解压</span></span><br><span class="line">library(R.utils)</span><br><span class="line">gunzip(<span class="string">&quot;file.gz&quot;</span>, remove = `TRUE`)</span><br><span class="line">bunzip2(<span class="string">&quot;file.bz2&quot;</span>, remove = `TRUE`)<span class="comment">#remove是否保留原文件</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#直接读取</span></span><br><span class="line">dat &lt;- read.table(<span class="string">&quot;file.gz&quot;</span>)<span class="comment">#部分会有问题</span></span><br><span class="line">dat &lt;- read.table(gzfile(<span class="string">&quot;file.gz&quot;</span>), header = <span class="built_in">F</span>)  </span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/09/20/R%E8%AF%AD%E8%A8%80%E8%A7%A3%E5%8E%8B%E4%B8%8E%E5%8E%8B%E7%BC%A9/" data-id="ckts23ax00001fwvl5rpx5cnh" data-title="" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-R-缺失值判断以及处理" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/09/20/R-%E7%BC%BA%E5%A4%B1%E5%80%BC%E5%88%A4%E6%96%AD%E4%BB%A5%E5%8F%8A%E5%A4%84%E7%90%86/" class="article-date">
  <time class="dt-published" datetime="2021-09-20T02:54:20.194Z" itemprop="datePublished">2021-09-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="R-缺失值判断以及处理"><a href="#R-缺失值判断以及处理" class="headerlink" title="R-缺失值判断以及处理"></a>R-缺失值判断以及处理</h1><p>#举例1：向量类型判断缺失值is.na和缺失值的填补which</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">library(<span class="string">&#x27;visdat&#x27;</span>)</span><br><span class="line">library(<span class="string">&#x27;ggplot2&#x27;</span>)</span><br><span class="line"></span><br><span class="line">msleep</span><br><span class="line"><span class="built_in">class</span>(msleep)</span><br><span class="line">vis_dat(msleep)</span><br><span class="line">vis_miss(msleep)</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>判断缺失值所在行并返回行号</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">missing</span>=which(<span class="built_in">is.na</span>(df_num), arr.ind=<span class="built_in">T</span>)</span><br><span class="line"><span class="built_in">missing</span>[,<span class="number">2</span>]=<span class="built_in">names</span>(df_num[,<span class="built_in">missing</span>[,<span class="number">2</span>]])</span><br><span class="line"><span class="built_in">missing</span></span><br></pre></td></tr></table></figure>



<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">is.na</span>(x)  <span class="comment">#返回一个逻辑向量，TRUE为缺失值，FALSE为非缺失值</span></span><br><span class="line"></span><br><span class="line">table(<span class="built_in">is.na</span>(x))  <span class="comment">#统计分类个数</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">sum</span>(x)  <span class="comment">#当向量存在缺失值的时候统计结果也是缺失值</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">sum</span>(x,na.rm = <span class="literal">TRUE</span>)  <span class="comment">#很多函数里都有na.rm=TRUE参数，此参数可以在运算时移除缺失值</span></span><br><span class="line"></span><br><span class="line">(x[which(<span class="built_in">is.na</span>(x))]</span><br></pre></td></tr></table></figure>

<p>#举例2：数据框类型判断缺失值is.na、缺失值的填补which、缺失值所在行的删除na.omit</p>
<p>(test</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">is.na</span>(test)  <span class="comment">#test中空值的判断</span></span><br><span class="line"></span><br><span class="line">which(<span class="built_in">is.na</span>(test),arr.ind = <span class="built_in">T</span>)  <span class="comment">#arr.ind=T可以返回缺失值的相应行列坐标</span></span><br><span class="line"></span><br><span class="line">test[which(<span class="built_in">is.na</span>(test),arr.ind = <span class="built_in">T</span>)]</span><br></pre></td></tr></table></figure>

<p>(test_omit</p>
<p>#举例3：识别缺失值的基本语法汇总</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">str(airquality)</span><br><span class="line"></span><br><span class="line">complete.cases(airquality)  <span class="comment">#判断个案是否有缺失值</span></span><br><span class="line"></span><br><span class="line">airquality[complete.cases(airquality),]  <span class="comment">#列出没有缺失值的行</span></span><br><span class="line"></span><br><span class="line">nrow(airquality[complete.cases(airquality),])  <span class="comment">#计算没有缺失值的样本量</span></span><br><span class="line"></span><br><span class="line">airquality[!complete.cases(airquality),]  <span class="comment">#列出有缺失的值的行</span></span><br><span class="line"></span><br><span class="line">nrow(airquality[!complete.cases(airquality),])  <span class="comment">#计算有缺失值的样本量</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">is.na</span>(airquality$Ozone)  <span class="comment">#TRUE为缺失值，FALSE为非缺失值</span></span><br><span class="line"></span><br><span class="line">table(<span class="built_in">is.na</span>(airquality$Ozone))</span><br><span class="line"></span><br><span class="line">complete.cases(airquality$Ozone)  <span class="comment">#FALSE为缺失值，TRUE为非缺失值</span></span><br><span class="line"></span><br><span class="line">table(complete.cases(airquality$Ozone))</span><br></pre></td></tr></table></figure>

<p>#可用sum()和mean()函数来获取关于缺失数据的有用信息</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sum</span>(<span class="built_in">is.na</span>(airquality$Ozone))  <span class="comment">#查看缺失值的个数</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">sum</span>(complete.cases(airquality$Ozone))  <span class="comment">#查看没有缺失值的个数</span></span><br><span class="line"></span><br><span class="line">mean(<span class="built_in">is.na</span>(airquality$Ozone))  <span class="comment">#查看缺失值的占比</span></span><br><span class="line"></span><br><span class="line">mean(<span class="built_in">is.na</span>(airquality))  <span class="comment">#查看数据集airquality中样本有缺失值的占比</span></span><br></pre></td></tr></table></figure>

<p>#举例4：探索缺失值模式</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#列表缺失值探索</span></span><br><span class="line"></span><br><span class="line">library(mice)</span><br><span class="line"></span><br><span class="line">md.pattern(airquality)</span><br><span class="line"></span><br><span class="line"><span class="comment">#图形缺失值探索</span></span><br><span class="line"></span><br><span class="line">library(VIM)</span><br><span class="line"></span><br><span class="line">aggr(airquality,prop=<span class="literal">FALSE</span>,number=<span class="literal">TRUE</span>)</span><br><span class="line"></span><br><span class="line">aggr(airquality,prop=<span class="literal">TRUE</span>,number=<span class="literal">TRUE</span>) <span class="comment">#生成相同的图形，但用比例代替了计数</span></span><br><span class="line"></span><br><span class="line">aggr(airquality,prop=<span class="literal">FALSE</span>,number=<span class="literal">FALSE</span>)  <span class="comment">#选项numbers = FALSE(默认)删去数值型标签</span></span><br></pre></td></tr></table></figure>

<p>#举例5：删除缺失值</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">airquality[complete.cases(airquality),] <span class="comment">#方法一：删除缺失值行</span></span><br><span class="line"></span><br><span class="line">na.omit(airquality) <span class="comment">#方法二：删除缺失值的行</span></span><br></pre></td></tr></table></figure>

<p>#举例6：缺失值回归模型插补</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">newnhanes2</span><br><span class="line"></span><br><span class="line">sub</span><br><span class="line"></span><br><span class="line">datatr</span><br><span class="line"></span><br><span class="line">datatr</span><br><span class="line"></span><br><span class="line">datate</span><br><span class="line"></span><br><span class="line">datate</span><br><span class="line"></span><br><span class="line">fit</span><br><span class="line"></span><br><span class="line">newnhanes2[sub,<span class="number">4</span>]</span><br></pre></td></tr></table></figure>

<p>#举例7：缺失值随机森林插补</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">library(missForest)</span><br><span class="line"></span><br><span class="line">z</span><br><span class="line"></span><br><span class="line">air.full</span><br><span class="line"></span><br><span class="line">zz</span><br><span class="line"></span><br><span class="line">nhanes2.full</span><br></pre></td></tr></table></figure>

<p>#举例8：线性回归模型插补</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">mice::md.pattern(airquality)</span><br><span class="line"></span><br><span class="line">index1</span><br><span class="line"></span><br><span class="line">dput(colnames(airquality))  <span class="comment">#求出变量列名称</span></span><br><span class="line"></span><br><span class="line">Ozone_train</span><br><span class="line"></span><br><span class="line">Ozone_test</span><br><span class="line"></span><br><span class="line">fit</span><br><span class="line"></span><br><span class="line">summary(fit)</span><br><span class="line"></span><br><span class="line">airquality[index1,<span class="string">&quot;Ozone&quot;</span>]</span><br><span class="line"></span><br><span class="line">index2</span><br><span class="line"></span><br><span class="line">Solar.R_train</span><br><span class="line"></span><br><span class="line">Solar.R_test</span><br><span class="line"></span><br><span class="line">Solar.R_fit</span><br><span class="line"></span><br><span class="line">summary(Solar.R_fit)</span><br><span class="line"></span><br><span class="line">airquality[index2,<span class="string">&quot;Solar.R&quot;</span>]</span><br><span class="line"></span><br><span class="line">mice::md.pattern(airquality)</span><br><span class="line"></span><br><span class="line"><span class="comment">#knn和bag缺失值插补(利用caret包中的preProcess函数，method参数有多种方式可选)</span></span><br><span class="line"></span><br><span class="line">question</span><br><span class="line"></span><br><span class="line">question</span><br><span class="line"></span><br><span class="line">str(question)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(i <span class="keyword">in</span> <span class="number">1</span>:ncol(question))&#123;</span><br><span class="line">question[,i]</span><br><span class="line"></span><br><span class="line">&#125;  <span class="comment">#批量修改为因子类型</span></span><br><span class="line"></span><br><span class="line">str(question)</span><br></pre></td></tr></table></figure>

<p>#举例9：利用KNN算法进行缺失值插补(只能对数值型变量处理)</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">question</span><br><span class="line"></span><br><span class="line">question</span><br><span class="line"></span><br><span class="line">mice::md.pattern(question)  <span class="comment">#列表缺失值探索</span></span><br><span class="line"></span><br><span class="line">library(caret)</span><br><span class="line"></span><br><span class="line">knn.model</span><br><span class="line"></span><br><span class="line">question1</span><br><span class="line"></span><br><span class="line">install.packages(<span class="string">&quot;RANN&quot;</span>)</span><br><span class="line"></span><br><span class="line">mice::md.pattern(question1)</span><br><span class="line"></span><br><span class="line">table(question1$性别)  <span class="comment">#不是之前的1和2了</span></span><br><span class="line"></span><br><span class="line">table(question$性别)</span><br></pre></td></tr></table></figure>

<p>#最后结果：knn不适合处理该数据，需要做哑变量处理，再套模型</p>
<p>#举例10：利用袋装算法进行缺失值插补(只能对数值型变量处理)</p>
<p>question</p>
<p>question</p>
<p>mice::md.pattern(question) #列表缺失值探索</p>
<p>library(caret)</p>
<p>bag.model</p>
<p>install.packages(“ipred”)</p>
<p>question2</p>
<p>mice::md.pattern(question2)  #列表缺失值探索</p>
<p>table(question2$性别)</p>
<p>#最后结果：bag算法不适合处理该数据<br>————————————————<br>版权声明：本文为CSDN博主「weixin_39997696」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。<br>原文链接：<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_39997696/article/details/111860583">https://blog.csdn.net/weixin_39997696/article/details/111860583</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/09/20/R-%E7%BC%BA%E5%A4%B1%E5%80%BC%E5%88%A4%E6%96%AD%E4%BB%A5%E5%8F%8A%E5%A4%84%E7%90%86/" data-id="ckts23ax20002fwvlcpmxh4zs" data-title="" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-miRanda" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/09/20/miRanda/" class="article-date">
  <time class="dt-published" datetime="2021-09-20T02:54:01.539Z" itemprop="datePublished">2021-09-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="miRanda"><a href="#miRanda" class="headerlink" title="miRanda"></a>miRanda</h1><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">wget http://cbio.mskcc.org/microrna_data/miRanda-aug2010.tar.gz</span><br><span class="line">tar -xzvf miRanda-aug2010.tar.gz</span><br><span class="line">cd /path/to/miRanda-3.3a</span><br><span class="line">./configure --prefix=/mnt/d/miRanda/miRanda-1.9/miRanda #--prefix最好设置为当前文件夹的路径</span><br><span class="line">make</span><br><span class="line">make install</span><br><span class="line"></span><br><span class="line">ls /mnt/d/miRanda/bin/miranda</span><br><span class="line">vim ~/.profile</span><br><span class="line">source ~/.profile</span><br><span class="line">which miranda</span><br><span class="line">miranda -h</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="输入文件准备"><a href="#输入文件准备" class="headerlink" title="输入文件准备"></a>输入文件准备</h2><ul>
<li><p>获取人类所有的miRNA的fasta文件hsa_miRNA.fa</p>
<p>miRBase—–browse—–expand all—–Homo sapiens—–select sequence type—–Mature sequence—–select all—–Fetch sequences</p>
</li>
<li><p>获取差异基因的fasta文件</p>
</li>
</ul>
<h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">miranda hsa_miRNA.fa SFTSV.fa -sc 150 -en -7 &gt; tmp.txt  #-sc指定序列比对打分的阈值，小于该阈值的结合位点会被过滤掉;-en指定自由能的阈值，结果必须小于该阈值才可以</span><br><span class="line"></span><br><span class="line">grep &#x27;&gt;&gt;&#x27; tmp.txt &gt; prediction.txt</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/09/20/miRanda/" data-id="ckts23ax40005fwvl7r4h29mp" data-title="" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-enrichplot富集结果可视化" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/09/20/enrichplot%E5%AF%8C%E9%9B%86%E7%BB%93%E6%9E%9C%E5%8F%AF%E8%A7%86%E5%8C%96/" class="article-date">
  <time class="dt-published" datetime="2021-09-20T02:53:53.091Z" itemprop="datePublished">2021-09-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="enrichplot富集结果可视化"><a href="#enrichplot富集结果可视化" class="headerlink" title="enrichplot富集结果可视化"></a>enrichplot富集结果可视化</h1><p>参考：<a target="_blank" rel="noopener" href="http://www.sci666.net/69929.html">www.sci666.net/69929.html</a></p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">DEGs &lt;- ENTREZID</span><br><span class="line">head(DEGs)</span><br><span class="line"></span><br><span class="line">enrich_go_CC &lt;- enrichGO(gene = DEGs, keyType = <span class="string">&#x27;ENTREZID&#x27;</span>, </span><br><span class="line">                         OrgDb = <span class="string">&#x27;org.Mm.eg.db&#x27;</span>,ont = <span class="string">&#x27;CC&#x27;</span>,</span><br><span class="line">                         pAdjustMethod = <span class="string">&quot;fdr&quot;</span>,pvalueCutoff = <span class="number">0.01</span>,</span><br><span class="line">                         qvalueCutoff  = <span class="number">0.05</span>,readable = <span class="built_in">T</span>)</span><br><span class="line"><span class="built_in">class</span>(enrich_go_CC)</span><br><span class="line"></span><br><span class="line">barplot(enrich_go_CC, showCategory = <span class="number">10</span>, title=<span class="string">&quot;EnrichmentGO_CC&quot;</span>)</span><br><span class="line">dotplot(enrich_go_CC,title=<span class="string">&quot;EnrichmentGO_CC_dot&quot;</span>)</span><br><span class="line">plotGOgraph(enrich_go_CC)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">enrich_go_ALL &lt;- enrichGO(gene = DEGs, keyType = <span class="string">&#x27;ENTREZID&#x27;</span>, </span><br><span class="line">                         OrgDb = <span class="string">&#x27;org.Mm.eg.db&#x27;</span>,ont = <span class="string">&#x27;ALL&#x27;</span>,</span><br><span class="line">                         pAdjustMethod = <span class="string">&quot;fdr&quot;</span>,pvalueCutoff = <span class="number">0.01</span>,</span><br><span class="line">                         qvalueCutoff  = <span class="number">0.05</span>,readable = <span class="built_in">T</span>)</span><br><span class="line"></span><br><span class="line">BP &lt;- enrich_go_ALL[enrich_go_ALL$ONTOLOGY==<span class="string">&#x27;BP&#x27;</span>, ]</span><br><span class="line">CC &lt;- enrich_go_ALL[enrich_go_ALL$ONTOLOGY==<span class="string">&#x27;CC&#x27;</span>, ]</span><br><span class="line">MF &lt;- enrich_go_ALL[enrich_go_ALL$ONTOLOGY==<span class="string">&#x27;MF&#x27;</span>, ]</span><br><span class="line"><span class="comment">#write.csv(as.data.frame(BP), &#x27;go.BP.csv&#x27;, row.names = FALSE, quote = FALSE)</span></span><br></pre></td></tr></table></figure>

<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">setReadable(enrich_go_CC, </span><br><span class="line">            <span class="string">&#x27;org.Mm.eg.db&#x27;</span>, </span><br><span class="line">            <span class="string">&#x27;ENTREZID&#x27;</span>) %&gt;% cnetplot( , showCategory = <span class="number">5</span>,<span class="comment">#展示富集条目数量，默认5</span></span><br><span class="line">                                      <span class="comment">#foldChange = fc,#倍数值  </span></span><br><span class="line">                                      colorEdge = <span class="literal">TRUE</span>, </span><br><span class="line">                                      categorySize=<span class="string">&#x27;pvalue&#x27;</span>,<span class="comment"># 中心点大小， or &#x27;geneNum&#x27;  </span></span><br><span class="line">                                      </span><br><span class="line">                                      circular = <span class="literal">TRUE</span>,<span class="comment">#圆形排列  </span></span><br><span class="line">                                      node_label = <span class="string">&quot;all&quot;</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">emapplot(enrich_go_CC,  showCategory = <span class="number">30</span>,  </span><br><span class="line">         color = <span class="string">&quot;p.adjust&quot;</span>,<span class="comment">#设置颜色，也可以用pvalue, qvalue</span></span><br><span class="line">         layout = <span class="string">&quot;sphere&quot;</span>,<span class="comment">##布局</span></span><br><span class="line">         pie_scale = <span class="number">1</span>,<span class="comment">#点大小</span></span><br><span class="line">         line_scale = <span class="number">1</span><span class="comment">#线条粗细</span></span><br><span class="line">         )</span><br></pre></td></tr></table></figure>

<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">setReadable(enrich_go_CC, <span class="string">&#x27;org.Mm.eg.db&#x27;</span>, <span class="string">&#x27;ENTREZID&#x27;</span>) %&gt;% heatplot( </span><br><span class="line">  <span class="comment">#,foldChange=fc</span></span><br><span class="line">  )</span><br></pre></td></tr></table></figure>

<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#pmcplot()</span></span><br><span class="line"><span class="comment">#根据PubMed Central的查询结果绘制出版物数量/比例趋势图。</span></span><br><span class="line"></span><br><span class="line">pmcplot(edo$Description[<span class="number">1</span>:<span class="number">5</span>], <span class="number">2015</span>:<span class="number">2020</span>)</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://www.codenong.com/js48ac98098760/">https://www.codenong.com/js48ac98098760/</a></p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">library(<span class="string">&#x27;pathview&#x27;</span>)</span><br><span class="line">hsa04110 &lt;- pathview(gene.data = DEGs,</span><br><span class="line">                     pathway.id = <span class="string">&#x27;hsa04110&#x27;</span>,</span><br><span class="line">                     species = <span class="string">&#x27;mmu&#x27;</span>,</span><br><span class="line">                     limit = <span class="built_in">list</span>(gene = <span class="built_in">max</span>(<span class="built_in">abs</span>(DEGs)),cpd = <span class="number">1</span>)</span><br><span class="line">                     )</span><br></pre></td></tr></table></figure>

<p>说明：在这里，geneList 可以是一个基因名及对应的flodchange 的列表，图中绿色即为下调，红色为上调。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">library(<span class="string">&#x27;enrichplot&#x27;</span>)</span><br><span class="line">gseaplot2(DEGs,<span class="comment">#数据</span></span><br><span class="line">          row.names(sortkk)[<span class="number">39</span>],<span class="comment">#画那一列的信号通路</span></span><br><span class="line">          title = <span class="string">&quot;Prion disease&quot;</span>,<span class="comment">#标题</span></span><br><span class="line">          base_size = <span class="number">15</span>,<span class="comment">#字体大小</span></span><br><span class="line">          color = <span class="string">&quot;green&quot;</span>,<span class="comment">#线条的颜色</span></span><br><span class="line">          pvalue_table = <span class="literal">TRUE</span>,<span class="comment">#加不加p值</span></span><br><span class="line">          ES_geom = <span class="string">&quot;line&quot;</span>)<span class="comment">#是用线，还是用d点</span></span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/09/20/enrichplot%E5%AF%8C%E9%9B%86%E7%BB%93%E6%9E%9C%E5%8F%AF%E8%A7%86%E5%8C%96/" data-id="ckts23ax30004fwvl7h137jwx" data-title="" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-Aspera" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/09/20/Aspera/" class="article-date">
  <time class="dt-published" datetime="2021-09-20T02:53:10.540Z" itemprop="datePublished">2021-09-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="Aspera"><a href="#Aspera" class="headerlink" title="Aspera"></a>Aspera</h1><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>首先进入<a href="https://link.zhihu.com/?target=https://www.ibm.com/products/aspera/downloads?list">aspera官方网站</a>，找到<strong>「IBM Aspera Connect」</strong>，进入下载页面，找到对应的Linux版本</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">下载</span></span><br><span class="line">wget https://d3gcli72yxqn2z.cloudfront.net/connect_latest/v4/bin/ibm-aspera-connect-3.11.2.63-linux-g2.12-64.tar.gz</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">解压</span></span><br><span class="line">tar zvxf ibm-aspera-connect-3.11.2.63-linux-g2.12-64.tar.gz</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 解压后得到一个脚本文件，运行该脚本，即可完成自动安装</span></span><br><span class="line">./ibm-aspera-connect-3.11.2.63-linux-g2.12-64.sh</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 所有安装文件都在~/.aspera/connect目录下，添加环境变量</span></span><br><span class="line">echo &#x27;export PATH=~/.aspera/connect/bin/:$PATH&#x27; &gt;&gt; ~/.profile</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 使环境变量生效</span></span><br><span class="line">source ~/.profile</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看ascp可执行文件所在的路径，应该是：~/.aspera/connect/bin/ascp</span></span><br><span class="line">which ascp</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 看程序是否能正常运行</span></span><br><span class="line">ascp -h</span><br></pre></td></tr></table></figure>

<h2 id="高速下载"><a href="#高速下载" class="headerlink" title="高速下载"></a>高速下载</h2><h3 id="1-NCBI数据下载"><a href="#1-NCBI数据下载" class="headerlink" title="1. NCBI数据下载"></a><strong>1. NCBI数据下载</strong></h3><p>NCBI中数据的下载链接通常为</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://ftp.ncbi.nlm.nih.gov/refseq/release/viral/viral.2.1.genomic.fna.gz</span><br></pre></td></tr></table></figure>

<p>需要去除前面的域名，用如下命令下载，注意最后有一个点<code>.</code>，表示文件下载到当前目录并且保持原文件名</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ascp -i ~/.aspera/connect/etc/asperaweb_id_dsa.openssh -l 100M -k 1 -T anonftp@ftp.ncbi.nlm.nih.gov:/refseq/release/viral/viral.2.1.genomic.fna.gz .</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">sra文件下载</span></span><br><span class="line">ascp -T -i ~/.aspera/connect/etc/asperaweb_id_dsa.openssh  -k 1 -l 200m anonftp@ftp-private.ncbi.nlm.nih.gov:/sra/sra-instant/reads/ByRun/sra/SRR/SRR620/SRR6208854/SRR6208854.sra ~/sra/</span><br><span class="line"></span><br><span class="line">ascp -v -i ~/.aspera/connect/etc/asperaweb_id_dsa.openssh -k 1 -T -l 200m anonftp@ftp-private.ncbi.nlm.nih.gov:/sra/sra-instant/reads/ByRun/sra/SRR/SRR949/SRR949627/SRR949627.sra ~/biostar/aspera/</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="2-EBI数据下载"><a href="#2-EBI数据下载" class="headerlink" title="2.EBI数据下载"></a><strong>2.EBI数据下载</strong></h3><p>同理，从EBI网站下载千人基因组数据</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ascp -i ~/.aspera/connect/etc/asperaweb_id_dsa.openssh -l 100M -T -P33001 fasp-g1k@fasp.1000genomes.ebi.ac.uk:vol1/ftp/release/20100804/ALL.2of4intersection.20100804.genotypes.vcf.gz .</span><br></pre></td></tr></table></figure>

<h3 id="3-批量下载"><a href="#3-批量下载" class="headerlink" title="3.批量下载"></a><strong>3.批量下载</strong></h3><p>先将要下载的文件的路径放入一个文件<code>file.lst</code>中，比如</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/refseq/release/viral/viral.1.1.genomic.fna.gz</span><br><span class="line">/refseq/release/viral/viral.2.1.genomic.fna.gz</span><br></pre></td></tr></table></figure>

<p>然后使用命令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ascp -i ~/.aspera/connect/etc/asperaweb_id_dsa.openssh -l 100M -T -k1 --mode recv --host ftp.ncbi.nlm.nih.gov --user anonftp --file-list file.lst .</span><br></pre></td></tr></table></figure>



<h2 id="Aspera批量下载SRA文件"><a href="#Aspera批量下载SRA文件" class="headerlink" title="Aspera批量下载SRA文件"></a>Aspera批量下载SRA文件</h2><p>很多时候需要同时下载多个SRA文件，ascp命令提供参数–file-list，用于批量下载SRA文件。</p>
<p>Step 1：建立SRA文件路径列表文件sra_list.txt</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano ~<span class="regexp">/sra/</span>sra_list.txt</span><br></pre></td></tr></table></figure>

<p>输入以下两行文本：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/sra/sra-instant/reads/ByRun/sra/SRR/SRR623/SRR6232298/SRR6232298.sra</span><br><span class="line">/sra/sra-instant/reads/ByRun/sra/SRR/SRR623/SRR6232299/SRR6232299.sra</span><br><span class="line"><span class="comment">#按Ctrl+O,Ctrl+X保存退出</span></span><br></pre></td></tr></table></figure>

<p>Step 2：批量下载sra_list.txt列表中的文件</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ascp -T -i ~<span class="regexp">/.aspera/connect</span><span class="regexp">/etc/asperaweb</span>_id_dsa.openssh  -k <span class="number">1</span> -l 200m --mode recv --host ftp-private.ncbi.nlm.nih.gov --user anonftp --file-list ~<span class="regexp">/sra/sra</span>_list.txt ~<span class="regexp">/sra/</span></span><br></pre></td></tr></table></figure>



<p><strong>「主要参数」</strong></p>
<blockquote>
<p>-i 免密从NCBI或EBI下载的私钥，安装完成就有，位于<code>~/.aspera/connect/etc/asperaweb_id_dsa.openssh</code><br>-l 最大下载速度，如100M<br>-k 断点续传，通常设为1<br>-T 无需加密传输<br>–host 服务器域名，NCBI为<a href="https://link.zhihu.com/?target=http://ftp.ncbi.nlm.nih.gov">http://ftp.ncbi.nlm.nih.gov</a>，EBI下载千人基因组为<a href="https://link.zhihu.com/?target=http://fasp.1000genomes.ebi.ac.uk">http://fasp.1000genomes.ebi.ac.uk</a><br>-P 用于SSH认证的TCP商品，一般是33001<br>–user 用户名，NCBI为anonftp，EBI下载千人基因组为g1k<br>–mode 传输模式，上传为send，下载为recv</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/df34b99cbd43">安装Aspera Connect工具下载sra数据 - 简书 (jianshu.com)</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/fdbd4c13fa29">Aspera数据下载快速应用 - 简书 (jianshu.com)</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/144830963">手把手教会高速下载SRA数据 - 知乎 (zhihu.com)</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/herokoking/article/details/78890567">使用aspera下载.fastq.gz和.sra数据_高锦的博客-CSDN博客</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/09/20/Aspera/" data-id="ckts23awv0000fwvl8y449kga" data-title="" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-hello-world" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/09/20/hello-world/" class="article-date">
  <time class="dt-published" datetime="2021-09-20T01:17:49.097Z" itemprop="datePublished">2021-09-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/09/20/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Welcome to <a target="_blank" rel="noopener" href="https://liuzqnb.com/">刘某人de小破站</a>! </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/09/20/hello-world/" data-id="ckts1txpu0000kcvlgb9hhyw7" data-title="Hello World" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">九月 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/09/20/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/">(no title)</a>
          </li>
        
          <li>
            <a href="/2021/09/20/U%E7%9B%98%E6%95%B0%E6%8D%AE%E6%81%A2%E5%A4%8D/">(no title)</a>
          </li>
        
          <li>
            <a href="/2021/09/20/sartoolkit%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/">(no title)</a>
          </li>
        
          <li>
            <a href="/2021/09/20/R%E8%AF%AD%E8%A8%80%E8%A7%A3%E5%8E%8B%E4%B8%8E%E5%8E%8B%E7%BC%A9/">(no title)</a>
          </li>
        
          <li>
            <a href="/2021/09/20/R-%E7%BC%BA%E5%A4%B1%E5%80%BC%E5%88%A4%E6%96%AD%E4%BB%A5%E5%8F%8A%E5%A4%84%E7%90%86/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 liuzq<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>